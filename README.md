# Abyss

**Descending into the Depths of Context.**

Abyss is a high-performance repository logic engine designed to bridge the gap between vast codebases and the limited horizons of Large Language Models. It doesn't just collect files; it distills them, transforming raw source into a concentrated stream of structural truth.

---

## The Philosophy

In the abyss of a modern repository, information is often lost in the noise of boilerplate and the tangled web of dependencies. Abyss uses a multi-modal approach to extract the "essence" of your code, ensuring that the most critical architectural patterns rise to the surface while the shallow echoes are filtered out.

### 1. Semantic Resonance
Abyss employs a sophisticated ranking algorithm that combines:
- **PageRank Centrality**: Identifying the "beating heart" of your codebase—the modules that everything else depends on.
- **Shannon Entropy**: Measuring the density of insight within each file to prioritize complex logic over repetitive patterns.
- **Topological Resonance**: Assembling context in the order of its biological existence—from the lowest-level primitives to the highest-level implementations.

### 2. AST-Aware Distillation
Through its "Smart Mode," Abyss understands the grammar of your code. It doesn't just strip whitespace; it surgically removes the implementation details of functions (Rust, TypeScript, Python) while preserving their signatures, maintaining a map of the territory without being buried by its soil.

### 3. Omnivore Vision
Abyss sees beyond plain text. It ingests:
- **Project Specifications**: Direct PDF-to-context extraction for grounding models in formal requirements.
- **Visual Context**: Automatic classification and metadata injection for binary assets, ensuring no image or icon is left out of the narrative.

---

## Installation

### The Modern Way (NPM)
Execute directly from the NPM registry.

```bash
npx abyss@latest
```

### The Purist Path (Rust)
Built for performance, straight from the source.

```bash
cargo install --path .
```

---

## Usage

### The TUI: Mission Control
Launch an interactive, Catppuccin-themed dashboard for deep exploration and precise file selection.

```bash
abyss --tui
```

**Interface Guide:**
- `t`: Activate search/filter mode.
- `Ctrl+a`: Select all visible paths.
- `r`: Trigger an immediate re-scan.
- `Mouse`: Natural navigation through the tree.

### The CLI: Automation
Generate a perfect 128k context stream for GPT-4 with a single command.

```bash
abyss . --gpt --output context.xml
```

### Mastery via Flags

| Flag | The Outcome |
|------|-------------|
| `--gpt` | Automatically optimizes for GPT-4's 128k context window. |
| `--claude` | Optimizes for Claude's 200k context window. |
| `--graph` | Injects Mermaid dependency diagrams to help the model "see" the architecture. |
| `--smart` | Compresses logic bodies into `/* ... */` while keeping the interface intact. |
| `--diff <REF>` | Focuses the lens only on what has changed since the last Git REF. |

---

## Engineering Truths

- **No Speculative Abstractions**: Every feature is grounded in the reality of LLM context limits.
- **Zero Ambiguity**: Deterministic output is the only output.
- **Performance First**: Parallel IO and SIMD-optimized tokenization ensure your context is ready before you finish the prompt.

---

## License

Proprietary. All Rights Reserved.
Abyss is built for those who value the precision of their context.

---

*“To see everything is to see nothing. To see the essence is to understand.”*

